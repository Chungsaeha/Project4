/*!
 * obigo-js-ui v1.0.2 (https://)
 * Licensed under the GPL license
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.vuxContextMenu=e():t.vuxContextMenu=e()}(this,function(){return function(t){function e(n){if(o[n])return o[n].exports;var i=o[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){t.exports=o(9)},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"obg-button",methods:{handleClick:function(t){this.$emit("click",t)}},computed:{iconOnly:function(){return!(!this.icon&&!this.$slots.icon||"undefined"!=typeof this.$slots.default)}},props:{icon:String,disabled:Boolean,type:{type:String,default:"default",validator:function(t){return["default","flat","round"].indexOf(t)>-1}},size:{type:String,default:"normal",validator:function(t){return["small","normal","large"].indexOf(t)>-1}}}}},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=o(10),s=n(i),r=o(8),c=n(r);e.default={props:{disable:Boolean,btnType:{type:String,default:"round"},icon:{type:String,default:"more"},options:{type:Array,required:!0,validator:function(t){return!(t.length<0||t.length>5)&&(t.forEach(function(t){if(!t.hasOwnProperty("name")||!t.hasOwnProperty("label"))throw new Error("options should be [{ name: xxxx, label: yyyy}, ...]")}),!0)}}},components:{"obg-button":c.default,"obg-popover":s.default},computed:{contextMenuHeight:function(){return 68*this.options.length+this.options.length-3}},methods:{close:function(){this.$refs.popover.close()},__open:function(t){this.disable||this.$refs.popover.open(t)},onItemClick:function(t){var e=t.currentTarget.getAttribute("name");this.$emit("input",e),this.close()},showDimScreen:function(){document.body.appendChild(this.$dim),document.body.appendChild(this.$closeButton),this.$dim.addEventListener("click",this.close),this.$closeButton.addEventListener("click",this.close),this.$emit("open")},hideDimScreen:function(){this.$dim.removeEventListener("click",this.close),this.$closeButton.removeEventListener("click",this.close),this.$focus.removeFocus(),this.$emit("close"),document.body.removeChild(this.$dim),document.body.removeChild(this.$closeButton)}},mounted:function(){var t=this,e=this.$refs.origin.$el.getBoundingClientRect();this.target=this.$refs.popover.$el.parentNode,this.target.addEventListener("contextmenu",this.__open),this.$dim=this.$refs.dim,this.$closeButton=this.$refs.closeButton,this.$closeButton.style.top=e.top+e.height/2-this.$refs.closeButton.offsetHeight/2+"px",this.$closeButton.style.left=e.left+e.width/2-this.$refs.closeButton.offsetWidth/2+"px",this.$nextTick(function(){t.$el.childNodes[2].removeChild(t.$dim),t.$el.childNodes[2].removeChild(t.$closeButton)})},beforeDestroy:function(){this.target.removeEventListener("contexmenu",this.handler)}}},function(t,e,o){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0});var i=o(4),s=n(i);e.default={props:{anchor:{type:String,default:"bottom left",validator:s.positionValidator},self:{type:String,default:"top left",validator:s.positionValidator},maxHeight:String,touchPosition:Boolean,anchorClick:{type:Boolean,default:!0},offset:{type:Array,validator:s.offsetValidator},disable:Boolean},data:function(){return{opened:!1,progress:!1}},computed:{transformCSS:function(){return this.getTransformProperties({selfOrigin:this.selfOrigin})},anchorOrigin:function(){return this.parsePosition(this.anchor)},selfOrigin:function(){return this.parsePosition(this.self)}},mounted:function(){var t=this;if(this.$slots.default){var e=this.$slots.default.length;(e<1||e>5)&&console.error("popover need 1~5 slot")}else console.error("popover need 1~5 slot");this.$nextTick(function(){t.anchorEl=t.$el.parentNode,t.anchorEl.removeChild(t.$el),t.anchorEl="BUTTON"===t.anchorEl.tagName?t.anchorEl:t.anchorEl.parentNode,t.anchorClick&&(t.anchorEl.classList.add("cursor-pointer"),t.anchorEl.addEventListener("click",t.toggle))})},beforeDestroy:function(){this.anchorClick&&this.anchorEl&&this.anchorEl.removeEventListener("click",this.toggle),this.close()},methods:{toggle:function(t){this.opened?this.close():this.open(t)},open:function(t){var e=this;this.disable||this.opened||(t&&(t.stopPropagation(),t.preventDefault()),this.opened=!0,document.body.click(),document.body.appendChild(this.$el),document.addEventListener("click",this.close),this.$el.addEventListener("click",this.close),this.$nextTick(function(){e.__updatePosition(t),e.$emit("open")}))},close:function(t){var e=this;this.opened&&!this.progress&&(document.removeEventListener("click",this.close),this.progress=!0,setTimeout(function(){e.opened=!1,e.progress=!1,document.body.removeChild(e.$el),e.$emit("close"),"function"==typeof t&&t()},1))},__updatePosition:function(t){this.setPosition({event:t,el:this.$el,offset:this.offset,anchorEl:this.anchorEl,anchorOrigin:this.anchorOrigin,selfOrigin:this.selfOrigin,maxHeight:this.maxHeight,anchorClick:this.anchorClick,touchPosition:this.touchPosition})},parsePosition:function(t){var e=t.split(" ");return{vertical:e[0],horizontal:e[1]}},getTransformProperties:function(t){var e=t.selfOrigin,o=e.vertical,n="middle"===e.horizontal?"center":e.horizontal;return{"transform-origin":o+" "+n+" 0px"}},setPosition:function(t){var e=t.el,o=t.anchorEl,n=t.anchorOrigin,i=t.selfOrigin,s=(t.maxHeight,t.event),r=t.anchorClick,c=t.touchPosition,l=t.offset,a=void 0;if(!s||r&&!c)a=this.getAnchorPosition(o,l);else{var d=this.eventPosition(s),u=d.top,f=d.left;a={top:u,left:f,width:1,height:1,right:f+1,center:u,middle:f,bottom:u+1}}var h=this.getTargetPosition(e),p={top:a[n.vertical]-h[i.vertical],left:a[n.horizontal]-h[i.horizontal]};e.style.top=Math.max(0,p.top)+"px",e.style.left=Math.max(0,p.left)+"px",e.style.maxHeight=this.maxHeight||.9*window.innerHeight+"px"},eventPosition:function(t){var e=void 0,o=void 0;return t.clientX||t.clientY?(e=t.clientX,o=t.clientY):(t.pageX||t.pageY)&&(e=t.pageX-document.body.scrollLeft-document.documentElement.scrollLeft,o=t.pageY-document.body.scrollTop-document.documentElement.scrollTop),{top:o,left:e}},getAnchorPosition:function(t,e){var o=t.getBoundingClientRect(),n=o.top,i=o.left,s=o.right,r=o.bottom,c={top:n,left:i,width:t.offsetWidth,height:t.offsetHeight};return e&&(c.top+=e[1],c.left+=e[0],r&&(r+=e[1]),s&&(s+=e[0])),c.right=s||c.left+c.width,c.bottom=r||c.top+c.height,c.middle=c.left+(c.right-c.left)/2,c.center=c.top+(c.bottom-c.top)/2,c},getTargetPosition:function(t){return{top:0,center:t.offsetHeight/2,bottom:t.offsetHeight,left:0,middle:t.offsetWidth/2,right:t.offsetWidth}}}}},function(t,e){"use strict";function o(t){var e=t.split(" ");return 2===e.length&&(["top","center","bottom"].includes(e[0])?!!["left","middle","right"].includes(e[1])||(console.error("Anchor/Self position must end with one of left/middle/right"),!1):(console.error("Anchor/Self position must start with one of top/center/bottom"),!1))}function n(t){return!t||2===t.length&&("number"==typeof t[0]&&"number"==typeof t[1])}Object.defineProperty(e,"__esModule",{value:!0}),e.positionValidator=o,e.offsetValidator=n},function(t,e){},function(t,e){},function(t,e){},function(t,e,o){var n,i;o(7),n=o(1);var s=o(13);i=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(i=n=n.default),"function"==typeof i&&(i=i.options),i.render=s.render,i.staticRenderFns=s.staticRenderFns,t.exports=n},function(t,e,o){var n,i;o(5),n=o(2);var s=o(11);i=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(i=n=n.default),"function"==typeof i&&(i=i.options),i.render=s.render,i.staticRenderFns=s.staticRenderFns,i._scopeId="data-v-072ba112",t.exports=n},function(t,e,o){var n,i;o(6),n=o(3);var s=o(12);i=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(i=n=n.default),"function"==typeof i&&(i=i.options),i.render=s.render,i.staticRenderFns=s.staticRenderFns,i._scopeId="data-v-496199f2",t.exports=n},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("obg-button",{ref:"origin",attrs:{icon:t.icon,type:t.btnType}},[t._t("icon"),t._v(" "),o("obg-popover",{ref:"popover",staticClass:"context-menu",style:{height:t.contextMenuHeight+"px"},attrs:{anchor:"top middle",self:"bottom right"},on:{open:t.showDimScreen,close:t.hideDimScreen}},t._l(t.options,function(e,n){return o("div",{directives:[{name:"obg-focus",rawName:"v-obg-focus",value:{zone:1,order:n+1},expression:"{zone: 1, order: index + 1}"}],staticClass:"menu-item",attrs:{name:e.name},on:{click:t.onItemClick}},[o("span",{staticClass:"item-content"},[t._v("\n        "+t._s(e.label)+"\n      ")])])})),t._v(" "),o("div",{ref:"dim",staticClass:"dim"}),t._v(" "),o("button",{ref:"closeButton",staticClass:"close-button animate-scale"},[o("i",{staticClass:"obg-icon-close"})])],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"obg-popover animate-scale",style:t.transformCSS,on:{click:function(t){t.stopPropagation()}}},[t._t("default")],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("button",{staticClass:"obg-button",class:["obg-button-"+t.type,"obg-button-"+t.size,{"is-disabled":t.disabled,"is-icon":t.icon||t.$slots.icon,"icon-only":t.iconOnly}],attrs:{disabled:t.disabled},on:{click:t.handleClick}},[t.icon||t.$slots.icon?o("span",{staticClass:"obg-button-icon"},[t._t("icon",[t.icon?o("i",{class:"obg-icon-"+t.icon}):t._e()])],2):t._e(),t._v(" "),o("label",{staticClass:"obg-button-text"},[t._t("default")],2)])},staticRenderFns:[]}}])});