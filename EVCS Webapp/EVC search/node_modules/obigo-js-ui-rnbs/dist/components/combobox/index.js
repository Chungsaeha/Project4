/*!
 * obigo-js-ui v1.0.2 (https://)
 * Licensed under the GPL license
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.vuxCombobox=e():t.vuxCombobox=e()}(this,function(){return function(t){function e(n){if(o[n])return o[n].exports;var i=o[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){t.exports=o(6)},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=o(7),r=n(i);e.default={name:"obg-combo-box",props:{disable:{type:Boolean,default:!1},itemHeight:{type:Number,default:61},focusZone:{type:Number,default:1},value:{type:Number,default:-1},options:{type:Array,required:!0,validator:function(t){return!(t.length<0||t.length>5)&&(t.forEach(function(t){if(!t.hasOwnProperty("name")||!t.hasOwnProperty("label"))throw new Error("options should be [{ name: xxxx, label: yyyy}, ...]")}),!0)}}},data:function(){return{selectedItemIndex:0}},components:{"obg-popover":r.default},computed:{contextMenuHeight:function(){return this.options.length*this.itemHeight+this.options.length-3},selectedItemLabel:function(){return this.options[this.selectedItemIndex].label}},methods:{close:function(){this.$refs.popover.close(),this.$emit("close")},open:function(t){this.disable||(this.$refs.popover.open(t),this.$emit("open"))},onOpen:function(){this.$emit("open")},onClose:function(){this.$emit("close")},onItemClick:function(t){var e=t.currentTarget.getAttribute("name");this.selectedItemIndex=this.options.findIndex(function(t){return t.name===e}),this.close()}},watch:{selectedItemIndex:function(t){this.$emit("input",t)},value:function(t){this.selectedItemIndex=t}},mounted:function(){this.target=this.$refs.popover.$el.parentNode,this.target.addEventListener("contextmenu",this.open),this.value>=0?this.selectedItemIndex=this.value:this.selectedItemIndex=0},beforeDestroy:function(){this.target.removeEventListener("contexmenu",this.handler)}}},function(t,e,o){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0});var i=o(3),r=n(i);e.default={props:{anchor:{type:String,default:"bottom left",validator:r.positionValidator},self:{type:String,default:"top left",validator:r.positionValidator},maxHeight:String,touchPosition:Boolean,anchorClick:{type:Boolean,default:!0},offset:{type:Array,validator:r.offsetValidator},disable:Boolean},data:function(){return{opened:!1,progress:!1}},computed:{transformCSS:function(){return this.getTransformProperties({selfOrigin:this.selfOrigin})},anchorOrigin:function(){return this.parsePosition(this.anchor)},selfOrigin:function(){return this.parsePosition(this.self)}},mounted:function(){var t=this;if(this.$slots.default){var e=this.$slots.default.length;(e<1||e>5)&&console.error("popover need 1~5 slot")}else console.error("popover need 1~5 slot");this.$nextTick(function(){t.anchorEl=t.$el.parentNode,t.anchorEl.removeChild(t.$el),t.anchorEl="BUTTON"===t.anchorEl.tagName?t.anchorEl:t.anchorEl.parentNode,t.anchorClick&&(t.anchorEl.classList.add("cursor-pointer"),t.anchorEl.addEventListener("click",t.toggle))})},beforeDestroy:function(){this.anchorClick&&this.anchorEl&&this.anchorEl.removeEventListener("click",this.toggle),this.close()},methods:{toggle:function(t){this.opened?this.close():this.open(t)},open:function(t){var e=this;this.disable||this.opened||(t&&(t.stopPropagation(),t.preventDefault()),this.opened=!0,document.body.click(),document.body.appendChild(this.$el),document.addEventListener("click",this.close),this.$el.addEventListener("click",this.close),this.$nextTick(function(){e.__updatePosition(t),e.$emit("open")}))},close:function(t){var e=this;this.opened&&!this.progress&&(document.removeEventListener("click",this.close),this.progress=!0,setTimeout(function(){e.opened=!1,e.progress=!1,document.body.removeChild(e.$el),e.$emit("close"),"function"==typeof t&&t()},1))},__updatePosition:function(t){this.setPosition({event:t,el:this.$el,offset:this.offset,anchorEl:this.anchorEl,anchorOrigin:this.anchorOrigin,selfOrigin:this.selfOrigin,maxHeight:this.maxHeight,anchorClick:this.anchorClick,touchPosition:this.touchPosition})},parsePosition:function(t){var e=t.split(" ");return{vertical:e[0],horizontal:e[1]}},getTransformProperties:function(t){var e=t.selfOrigin,o=e.vertical,n="middle"===e.horizontal?"center":e.horizontal;return{"transform-origin":o+" "+n+" 0px"}},setPosition:function(t){var e=t.el,o=t.anchorEl,n=t.anchorOrigin,i=t.selfOrigin,r=(t.maxHeight,t.event),s=t.anchorClick,l=t.touchPosition,c=t.offset,a=void 0;if(!r||s&&!l)a=this.getAnchorPosition(o,c);else{var f=this.eventPosition(r),d=f.top,u=f.left;a={top:d,left:u,width:1,height:1,right:u+1,center:d,middle:u,bottom:d+1}}var h=this.getTargetPosition(e),p={top:a[n.vertical]-h[i.vertical],left:a[n.horizontal]-h[i.horizontal]};e.style.top=Math.max(0,p.top)+"px",e.style.left=Math.max(0,p.left)+"px",e.style.maxHeight=this.maxHeight||.9*window.innerHeight+"px"},eventPosition:function(t){var e=void 0,o=void 0;return t.clientX||t.clientY?(e=t.clientX,o=t.clientY):(t.pageX||t.pageY)&&(e=t.pageX-document.body.scrollLeft-document.documentElement.scrollLeft,o=t.pageY-document.body.scrollTop-document.documentElement.scrollTop),{top:o,left:e}},getAnchorPosition:function(t,e){var o=t.getBoundingClientRect(),n=o.top,i=o.left,r=o.right,s=o.bottom,l={top:n,left:i,width:t.offsetWidth,height:t.offsetHeight};return e&&(l.top+=e[1],l.left+=e[0],s&&(s+=e[1]),r&&(r+=e[0])),l.right=r||l.left+l.width,l.bottom=s||l.top+l.height,l.middle=l.left+(l.right-l.left)/2,l.center=l.top+(l.bottom-l.top)/2,l},getTargetPosition:function(t){return{top:0,center:t.offsetHeight/2,bottom:t.offsetHeight,left:0,middle:t.offsetWidth/2,right:t.offsetWidth}}}}},function(t,e){"use strict";function o(t){var e=t.split(" ");return 2===e.length&&(["top","center","bottom"].includes(e[0])?!!["left","middle","right"].includes(e[1])||(console.error("Anchor/Self position must end with one of left/middle/right"),!1):(console.error("Anchor/Self position must start with one of top/center/bottom"),!1))}function n(t){return!t||2===t.length&&("number"==typeof t[0]&&"number"==typeof t[1])}Object.defineProperty(e,"__esModule",{value:!0}),e.positionValidator=o,e.offsetValidator=n},function(t,e){},function(t,e){},function(t,e,o){var n,i;o(4),n=o(1);var r=o(8);i=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(i=n=n.default),"function"==typeof i&&(i=i.options),i.render=r.render,i.staticRenderFns=r.staticRenderFns,i._scopeId="data-v-08045837",t.exports=n},function(t,e,o){var n,i;o(5),n=o(2);var r=o(9);i=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(i=n=n.default),"function"==typeof i&&(i=i.options),i.render=r.render,i.staticRenderFns=r.staticRenderFns,i._scopeId="data-v-496199f2",t.exports=n},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("button",{ref:"origin",staticClass:"combo-box-button",attrs:{disabled:t.disabled}},[o("label",[t._v(t._s(t.selectedItemLabel))]),t._v(" "),o("div",{staticClass:"arrow"}),t._v(" "),o("obg-popover",{ref:"popover",staticClass:"combo-box",style:{height:t.contextMenuHeight+"px"},attrs:{anchor:"bottom left",self:"top left"},on:{open:t.onOpen,close:t.onClose}},t._l(t.options,function(e,n){return o("div",{directives:[{name:"obg-focus",rawName:"v-obg-focus",value:{zone:t.focusZone,order:n+1},expression:"{zone: focusZone, order: index + 1}"}],staticClass:"menu-item",class:[{selected:t.selectedItemIndex===n}],style:{height:t.itemHeight+"px"},attrs:{name:e.name},on:{click:t.onItemClick}},[o("span",{staticClass:"item-content",style:{lineHeight:t.itemHeight+"px"}},[t._v("\n        "+t._s(e.label)+"\n      ")])])}))],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"obg-popover animate-scale",style:t.transformCSS,on:{click:function(t){t.stopPropagation()}}},[t._t("default")],2)},staticRenderFns:[]}}])});