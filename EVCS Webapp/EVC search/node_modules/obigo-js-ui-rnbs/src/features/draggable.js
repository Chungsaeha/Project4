/**
 * Created by krinjadl on 2017-03-28.
 */
let isDragging = false

export default function (element, options) {
  const moveStart = function (event) {
    if (options.drag) {
      options.drag(event)
    }
  }
  const moveEnd = function (event) {
    document.removeEventListener('mousemove', moveStart)
    document.removeEventListener('mouseup', moveEnd)

    document.onselectstart = null
    document.ondragstart = null

    isDragging = false

    if (options.end) {
      options.end(event)
    }
  }
  element.addEventListener('mousedown', function (event) {
    if (isDragging) return
    event.preventDefault()
    document.onselectstart = function () { return false }
    document.ondragstart = function () { return false }

    document.addEventListener('mousemove', moveStart)
    document.addEventListener('mouseup', moveEnd)

    isDragging = true

    if (options.start) {
      options.start(event)
    }
  })
}
