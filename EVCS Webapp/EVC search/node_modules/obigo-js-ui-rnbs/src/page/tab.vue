<template>
  <div class="contents">
    <div class="label">
      <label>Tab item count - {{computedVal}}</label>
      <label>Selected tab index - {{value}}</label>
      <label>clicked item index- {{clickedItemIndex}}</label>
      <obg-button @click="nextTab"> Next tab</obg-button>
    </div>
    <obg-footer
      @input="onInput"
      :options="option"
    >
      <obg-tab v-model="value">
        <obg-tab-item
          v-for="n in computedVal"
          :icon="items[n-1].icon"
          :selected="items[n-1].selected"
          :disabled="items[n-1].disable"
          @click="onItemClick"
        >
          {{items[n-1].label}}
        </obg-tab-item>
      </obg-tab>
    </obg-footer>
  </div>
</template>

<script>
  import {tab, tabItem} from '../components/tab'
  import footer from '../components/footer'
  import button from '../components/button'

  export default {
    name: 'tab',
    components: {
      'obg-tab': tab,
      'obg-tab-item': tabItem,
      'obg-footer': footer,
      'obg-button': button
    },
    computed: {
      computedVal () {
        return Number(this.itemCount)
      }
    },
    data () {
      return {
        itemCount: 4,
        option: [{name: '2', label: 'Item Count - 2'}, {name: '3', label: 'Item Count - 3'}, {name: '4', label: 'Item Count - 4'}],
        items: [{icon: 'player', label: 'Player', selected: false, disable: false},
          {icon: 'list', label: 'List', selected: true, disable: false},
          {icon: 'contacts', label: 'Contacts', selected: false, disable: false},
          {icon: 'dial', label: 'Dial', selected: false, disable: true}],
        value: -1,
        clickedItemIndex: -1
      }
    },
    methods: {
      onInput (val) {
        this.itemCount = val
      },
      onItemClick (val) {
        this.clickedItemIndex = val
      },
      nextTab () {
        if (this.value < this.itemCount - 1 && this.value < 2) {
          this.value += 1
        } else {
          this.value = 0
        }
      }
    }
  }
</script>
<style lang='scss' scoped>
  .contents{
    position: relative;
    width: 800px;
    height: 480px;
    background:#2a2a2a;
    color: #ffffff;
  }
  .label{
    position: absolute;
    top: 30%;
    left: 30%;
    & > label {
      display:block;
    }
  }
</style>
