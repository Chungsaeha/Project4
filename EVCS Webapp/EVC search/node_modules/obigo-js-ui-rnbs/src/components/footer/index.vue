<template>
  <div class="obg-footer">
    <div class="obg-footer-mask" v-show=mask></div>
    <obg-button class="footer-button" icon="back" @click="onClickBack" type="flat" :disabled="this.disable == 'left' || this.disable =='both' ? true : false"></obg-button>
    <div class="zone-3"><slot></slot></div>
    <obg-context-menu
      class="footer-button"
      btnType="flat"
      :icon="rightIcon"
      :disabled="this.disable == 'right' || this.disable =='both' ? true : false"
      :options="options"
      @input="onInput"
      @open="onOpen"
      @close="onClose"
    ></obg-context-menu>
  </div>
</template>

<script>
/**
  * obg-footer
  * @class footer
  * @classdesc components/footer
  * @param {string} [disable=none|left|right|both]
  * @param {string} [rightIcon=more]
  * @param {boolean} [mask=false]
  * @param {slot} [slot] zone-3
  * @param {function} [back] onBack cb
  * @event {string} [input]
  *
  * @example
  * <obg-footer :mask=false @back='onBack' :disable='left'>
  *   <obg-button-group v-model="btnGroup" :animated=true >
  *     obg-button-group-item icon='play'> Player </obg-button-group-item>
  *   </obg-button-group>
  * </obg-footer>
 */
import button from '../button/index.vue'
import contextMenu from '../context-menu'

export default {
  name: 'obg-footer',
  components: {
    'obg-button': button,
    'obg-context-menu': contextMenu
  },
  props: {
    mask: {
      type: Boolean,
      default: false
    },
    disable: {
      type: String,
      default: 'none',
      validator (value) {
        return [
          'none',
          'left',
          'right',
          'both'
        ].indexOf(value) > -1
      }
    },
    rightIcon: {
      type: String,
      default: 'spread'
    },
    options: {
      type: Array,
      default: () => [{name: 'opt1', label: 'Option'}, {name: 'opt2', label: 'Advanced Setting'}, {name: 'opt3', label: 'Reset'}, {name: 'opt4', label: 'Help'}, {name: 'opt5', label: 'Smart Tutoriels'}]
    }
  },
  methods: {
    onClickBack (evt) {
      this.$emit('back', evt)
    },
    onInput (evt) {
      this.$emit('input', evt)
    },
    onOpen () {
      this.$emit('open')
    },
    onClose () {
      this.$emit('close')
    }
  }
}
</script>

<style lang="scss">
  @import '../../styles/colors.variables.scss';
  .obg-footer{
    display:flex;
    position: absolute;
    bottom: 0px;
    width: 800px;
    height: 78px;
    background-color: transparent;
    justify-content: center;
    align-items: center;
    text-align: center;
    .zone-3{
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 546px;
      /*margin: 0 6px 0 3px;*/
    }
    .obg-footer-mask{
      position:absolute;
      width:100%;
      height:78px;
      box-shadow: 0 0 10px 5px rgba(20,20,20,0.3);
      background: linear-gradient(to bottom, rgba(20,20,20,0.3) 0%, rgba(20,20,20,0.34) 8%, rgba(20,20,20,0.38) 16%, rgba(20,20,20,0.42) 24%, rgba(20,20,20,0.46) 32%, rgba(20,20,20,0.50) 40%, rgba(20,20,20,0.54) 48%, rgba(20,20,20,0.58) 56%, rgba(20,20,20,0.62) 64%, rgba(20,20,20,0.66) 72%, rgba(20,20,20,0.7) 80%, rgba(20,20,20,0.74) 90%, rgba(20,20,20,0.78) 100%);
    }
    button.footer-button{
      float:left;
      background-color: color(tertiary) ;
      height: 78px;
      width: 127px;
      z-index: 150;
      &:first-of-type{
        margin-right: auto;
      }
      &:last-child{
        margin-left:auto;
      }
      &:disabled{
        opacity: 1;
        & > span{
          opacity:0.5;
        }
      }
    }
  }
</style>
