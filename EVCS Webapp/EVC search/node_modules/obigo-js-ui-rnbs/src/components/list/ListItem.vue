<template>
    <div class='obg-list-item' :class='{fixed: fixed}' @click="handleClick" >
        <slot></slot>
    </div>
</template>

<script>
/**
 * obg-list-item
 * @class list-item
 * @classdesc components/list-item
 *
 * @example
 * <obg-list-item>item1</obg-list-item>
 *
 */
export default {
  name: 'obg-list-item',
  props: {
    fixed: {
      type: Boolean,
      default: false
    }
  },
  methods: {
    handleClick (e) {
      this.$emit('click', e)
      var comps = this.$el.querySelectorAll('input, select')
      for (var i = 0; i < comps.length; i++) {
        var ev = document.createEvent('MouseEvents')
        var target = comps[i]
        ev.initMouseEvent('click', false, true, e.view, 1, target.screenX, target.screenY, target.clientX, target.clientY, e.ctrlKey, e.altKey, e.shiftKey, e.metaKey, 0, null)
        ev._constructed = true
        target.dispatchEvent(ev)
      }
    },
    checkFixed () {
      if (this.fixed) {
        var listEl = this.$el.parentNode.parentNode
        var fixedItems = listEl.firstChild.querySelectorAll('.fixed')
        if (fixedItems.length > 1) {
          throw new Error('Property \'fixed\' can only one in each list')
        }
        var dummyTop = this.$el.cloneNode(false)
        dummyTop.classList.remove('fixed')
        dummyTop.classList.add('odd')
        dummyTop.style.backgroundColor = 'transparent'
        listEl.firstChild.insertBefore(dummyTop, listEl.firstChild.firstChild)
        this.$el.classList.add('odd')
        listEl.appendChild(this.$el)
      }
    }
  },
  mounted () {
    var contentText = this.$el.querySelectorAll('.content > p')
    if (contentText.length >= 2) {
      this.$el.classList.add('large')
    }
    this.checkFixed()
  }
}
</script>
<style lang="scss" >
@import '../../styles/colors.variables.scss';
.obg-list-item{
    min-height:69px;
    position:relative;
    padding:10px 10px;
    box-sizing:border-box;

    display:flex;
    height:69px;
    flex-direction:row;

    &.large{
      height:100px;
      > .tail, > .head{
        > img{
          margin-top:20px;
        }
        > .icon{
          margin-top:15px;
        }
      }
    }
    &:nth-child(even), &.even{
      background-color:#000000;
    }
    &:nth-child(odd), &.odd{
      background-color:#191919;
    }
    &:active{
        background-color:color(secondary);
    }
    &.focus{
      box-shadow: inset 0 0 0 3px color(white);
    }
    &.fixed{
      position:absolute;
      width:100%;
      top:0;
      left:0;
      z-index:1;
    }
      > .head{
        > img{
          max-width:45px;
          max-height:45px;
          float:left;
          margin-right:5px;
        }
        > .icon{
          max-width:55px;
          width:55px;
          max-height:55px;
          height:55px;
          float:left;
          margin-right:5px;
          margin-top:-5px;
        }

      }

      > .content{
        flex:1;
        padding-left:10px;
        padding-right:10px;
        display:flex;
        flex-direction:column;
        justify-content:center;
        p{
          font-size:32px;
          line-height:normal;
          display:block;
          max-height:33px;
          margin:0;
          flex:1;
          &.sub{
            font-size:26px;
          }
        }
      }

      > .tail{
        > img{
          max-width:45px;
          max-height:45px;
          float:right;
          margin-right:5px;
        }
        > .icon{
          max-width:55px;
          width:55px;
          max-height:55px;
          height:55px;
          float:right;
          margin-right:5px;
          margin-top:-5px;
        }
        p{
          font-size:24px;
          line-height:normal;
          display:block;
          max-height:33px;
          margin:0;
        }
        text-align:right;

      }

}
</style>

