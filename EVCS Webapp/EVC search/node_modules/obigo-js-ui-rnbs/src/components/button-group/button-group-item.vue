<template>
  <a
    class="obg-button-group-item"
    :class="[iconPosition, {
      'obg-button-group-current': currentIndex === $parent.currentIndex,
      'obg-button-group-icon': icon || $slots.icon,
      'disabled': disabled
    }]"
    @click="onItemClick"
  >
    <span
      class="obg-button-group-icon"
      :class="[{
        'icon-only': !($slots.default)
      }]"
       v-if="icon || $slots.icon">
      <slot name="icon">
        <i v-if="icon" :class="'obg-icon-' + icon"></i>
      </slot>
    </span>
    <label class="obg-button-group-text"><slot></slot></label>
  </a>
</template>

<script>
/**
 * @class button-group-item
 * @classdesc components/button-group-item
 * @desc button
 * @param {boolean} [disabled=false]
 * @param {string} [icon]
 * @param {boolean} [selected]
 * @param {slot} [slot] label
 * @param {slot} [icon] icon *
 *
 * @example
 * import {ButtonGroup,ButtonGroupItem} from 'obigo-js-ui/components/button-group'
 * <obg-button-group-item
 *  icon='more'
 *  iconPosition='top'
 *  @click ='onClick'
 *  selected
 * >
 *   button1
 * </obg-button-group-item>
 */
import { childMixin } from '../../mixins/multi-items'

export default {
  name: 'obg-button-group-item',
  mixins: [childMixin],
  props: {
    icon: String,
    iconPosition: {
      type: String,
      default: 'top',
      validator (value) {
        return [
          'top',
          'left'
        ].indexOf(value) > -1
      }
    },
    disabled: {
      type: Boolean,
      default: false
    }
  },
  mounted () {
    this.$on('jogclick', () => {
      this.onItemClick()
    })
  }
}
</script>

<style lang="scss">
  @import '../../styles/colors.variables.scss';
  .obg-button-group-item{
    position: relative;
    display: flex;
    width: 145px;
    height: 60px;
    border-radius: 30px;
    border: 2px solid transparent;
    color: color(white);
    font-size: 20px;
    outline: none;
    user-select: none;
    align-items: center;
    justify-content: center;
    &.obg-focus {
      &:before{
        content:'';
        position:absolute;
        width:145px;
        height:60px;
        border: 2px solid color(white);
        display:block;
      }
    }
    &.obg-button-group-icon {
      &.top {
        display:block;
        &:before{
          margin-top:-4px;
        }
        & > .obg-button-group-icon{
          display: flex;
          height: 32px;
          justify-content: center;
          align-items: center;
          & > i {
            display:block;
          }
          & > svg{
            height:32px;
          }
          &.icon-only{
            height:auto;
          }
        }
        & > .obg-button-group-text{
          display:block;
          text-align: center;
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
          padding: 0 10px 0 10px;
        }
      }
      &.left {
        & > .obg-button-group-icon{
          display: flex;
          justify-content: center;
          align-items: center;
          & > i {
            width: 55px;
            height: 55px;
            display: inline-block;
            transform: scale(0.6);
            -webkit-transform: scale(0.6);
          }
        }
        & > .obg-button-group-text{
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
          width: 90%;
        }
      }
    }
    &:active{
      border:2px solid color(white);
      background: color(secondary);
    }
    &.focus{
      color:color(white);
      box-shadow:none;
      border:2px solid color(white);
    }
    &.obg-button-group-current{
      border: 2px solid  #7b7b7b;
      background-color:  #7b7b7b;
      &:active{
        border-color: color(white);
        background: color(secondary);
      }
    }
    & > .obg-button-group-text{
      display:block;
      text-align: center;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      padding: 0 10px 0 10px;
    }
    &.disabled{
      opacity:0.3;
      pointer-events: none;
    }

  }


</style>
