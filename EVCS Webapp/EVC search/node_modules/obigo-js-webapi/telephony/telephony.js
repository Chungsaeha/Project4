!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=n(35),a=r(u),l=n(36),c=r(l),f=n(8),_=r(f),p=n(5),E=r(p);n(37),function(){var e=!0,t=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return s(t,e),t}(a.default),n=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return s(t,e),t}(c.default),r={version:null,start:function(o,i,s){function u(){c()}function a(e){"function"==typeof s&&s(),console.log("close_callback is called ---- %")}function l(e){"function"==typeof i&&i(e)}function c(){e&&console.info("%c === on telephony ===","color:dodgerblue");try{var s=new t,u=new n;window.navigator.telephony[s.me.category]=s,window.navigator.telephony[u.me.category]=u,r.version=s.version,o()}catch(e){console.error(e),i(e)}}return"function"!=typeof o?("function"==typeof i&&i((new _.default).setMessage("A function is required as a parameter").throw()),!1):void window.telephony.init(E.default.apps.getWidgetId(),u,a,l)}};window.navigator.telephony=r}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),u=(r(s),function(){function e(){o(this,e),this.me={}}return i(e,[{key:"getClass",value:function(){return this.constructor.name}},{key:"clone",value:function(){}},{key:"getBaseContext",value:function(){return this}},{key:"equals",value:function(e){return this instanceof e.constructor}}]),e}());t.default=u},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"configuration",DEBUG:!0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4),l=r(a),c=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.me.types={},e.me.category=null,e.me.domain=null,e}return s(t,e),u(t,[{key:"get",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new window.Promise(function(r,o){var i=function(e){r(e.value)},s=function(e){o(e)};window[t.me.domain].get(e,n,i,s)})}},{key:"set",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new window.Promise(function(r,o){var i=function(e){r(e.value)},s=function(e){o(e)};window[t.me.domain].set(e,n,i,s)})}},{key:"subscribe",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return window[this.me.domain].addListener(e,n,t)}},{key:"unsubscribe",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return window[this.me.domain].removeListener(e,t,n)}},{key:"unsubscribeAll",value:function(e){}},{key:"getType",value:function(e){return this.me.category+"_"+e}}]),t}(l.default);t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),l=r(a),c=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return s(t,e),u(t,[{key:"getWebSocket",value:function(){}}]),t}(l.default);t.default=c},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default={name:"shared",apps:{getWidgetId:function(){var e=null;if(window.applicationFramework)if(window.applicationFramework.hasOwnProperty("applicationManager")){var t=window.applicationFramework.applicationManager.getOwnerApplication(window.document);e=t.getDescriptor().id}else console.log("window.applicationFramework does not have applicationManager");return e}},utils:{isNull:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t===!0?null===e&&"object"===("undefined"==typeof e?"undefined":n(e)):null===e},isNotNull:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t===!0?!(null===e&&"object"===("undefined"==typeof e?"undefined":n(e))):!(null===e)},isFunction:function(e){return"function"==typeof e},isNotFunction:function(e){return"function"!=typeof e}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(7),a=r(u),l=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return s(t,e),t}(a.default);t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),l=r(a),c=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.code=null,e.title=null,e.message=null,e}return s(t,e),u(t,[{key:"throw",value:function(){return{code:this.code,title:this.title,message:this.message}}},{key:"setMessage",value:function(e){return this.message=e,this}}]),t}(l.default);t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(6),a=r(u),l=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.code=400,n.title="UnmatchedParameterTypeError",n.message=e,n}return s(t,e),t}(a.default);t.default=l},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(3),a=r(u),l=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.me.domain="telephony",e.version="1.0.1",e}return s(t,e),t}(a.default);t.default=l},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(10),l=r(a),c=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.me.category="callMgr",e.me.types.CALL_MGR_EVENT_MAKE_CALL="makecall",e.me.types.CALL_MGR_EVENT_DEVICE_PROPERTIES="deviceProperties",e.me.types.CALL_MGR_EVENT_HISTORY_LIST="historyList",e.me.types.CALL_MGR_EVENT_CALL_STATE="callState",e.me.types.CALL_MGR_EVENT_HISTORY_STATE="historyState",e}return s(t,e),u(t,[{key:"getCallState",value:function(){return this.get(this.getType(this.me.types.CALL_MGR_EVENT_CALL_STATE))}},{key:"makeCall",value:function(e){return this.set(this.getType(this.me.types.CALL_MGR_EVENT_MAKE_CALL),e)}},{key:"getDeviceProperties",value:function(e){var t={};return"undefined"!=typeof e&&(t.deviceHandle=e),this.get(this.getType(this.me.types.CALL_MGR_EVENT_DEVICE_PROPERTIES),t)}},{key:"getHistory",value:function(e){return this.get(this.getType(this.me.types.CALL_MGR_EVENT_HISTORY_LIST),e)}},{key:"addCallStateListener",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.subscribe(this.getType(this.me.types.CALL_MGR_EVENT_CALL_STATE),e,t)}},{key:"removeCallStateListener",value:function(e){return this.unsubscribe(this.getType(this.me.types.CALL_MGR_EVENT_CALL_STATE),e)}},{key:"addDevicePropertiesChangeListener",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.subscribe(this.getType(this.me.types.CALL_MGR_EVENT_DEVICE_PROPERTIES),e,t)}},{key:"removeDevicePropertiesChangeListener",value:function(e){return this.unsubscribe(this.getType(this.me.types.CALL_MGR_EVENT_DEVICE_PROPERTIES),e)}},{key:"addHistoryChangeListener",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.subscribe(this.getType(this.me.types.CALL_MGR_EVENT_HISTORY_STATE),e,t)}},{key:"removeHistoryChangeListener",value:function(e){return this.unsubscribe(this.getType(this.me.types.CALL_MGR_EVENT_HISTORY_STATE),e)}},{key:"CallMgrCallStateEnum",get:function(){return{TELEPHONY_CALLMGR_STATE_DIALING:0,TELEPHONY_CALLMGR_STATE_CONNECTING:1,TELEPHONY_CALLMGR_STATE_ALERTING:2,TELEPHONY_CALLMGR_STATE_RINGING:3,TELEPHONY_CALLMGR_STATE_ACTIVE:4,TELEPHONY_CALLMGR_STATE_CONFERENCE:5,TELEPHONY_CALLMGR_STATE_INCOMING:6,TELEPHONY_CALLMGR_STATE_WAITING:7,TELEPHONY_CALLMGR_STATE_ACCEPTED:8,TELEPHONY_CALLMGR_STATE_HELD:9,TELEPHONY_CALLMGR_STATE_DISCONNECTED:10,TELEPHONY_CALLMGR_STATE_HOLDING:11,TELEPHONY_CALLMGR_STATE_RESUMING:12,TELEPHONY_CALLMGR_STATE_REDIRECTING:13,TELEPHONY_CALLMGR_STATE_TRANSFERRING:14,TELEPHONY_CALLMGR_STATE_DISCONNECTING:15}}},{key:"CallMgrDurationOperationEnum",get:function(){return{TELEPHONY_CALLMGR_DURATION_OPERATION_EQUAL:0,TELEPHONY_CALLMGR_DURATION_OPERATION_LESSTHAN:1,TELEPHONY_CALLMGR_DURATION_OPERATION_MORETHAN:2,TELEPHONY_CALLMGR_DURATION_OPERATION_LESSTHANOREQUAL:3,TELEPHONY_CALLMGR_DURATION_OPERATION_MORETHANOREQUAL:4}}},{key:"CallMgrDirectionEnum",get:function(){return{TELEPHONY_CALLMGR_DIRECTION_DIALED:0,TELEPHONY_CALLMGR_DIRECTION_RECEIVED:1,TELEPHONY_CALLMGR_DIRECTION_MISSED:2,TELEPHONY_CALLMGR_DIRECTION_MISSED_NEW:3}}},{key:"CallMgrSortEnum",get:function(){return{TELEPHONY_CALLMGR_SORTBY_FIRSTNAME:0,TELEPHONY_CALLMGR_SORTBY_LASTNAME:1,TELEPHONY_CALLMGR_SORTBY_ADDRESS:2,TELEPHONY_CALLMGR_SORTBY_EMAIL:3,TELEPHONY_CALLMGR_SORTBY_NUMBER:4,TELEPHONY_CALLMGR_SORTBY_CATEGORY:5,TELEPHONY_CALLMGR_SORTBY_BIRTHDAY:6}}},{key:"CallMgrOrderEnum",get:function(){return{TELEPHONY_CALLMGR_SORT_ORDER_ASCENDING:0,TELEPHONY_CALLMGR_SORT_ORDER_DESCENDING:1,TELEPHONY_CALLMGR_SORT_ORDER_FINISHED:2}}}]),t}(l.default);t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(10),l=r(a),c=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.me.category="smsMgr",e.me.types.SMS_MGR_EVENT_SMS="sms",e.me.types.SMS_MGR_EVENT_SMS_SENT="smsSent",e.me.types.SMS_MGR_EVENT_SMS_RECEIVED="smsReceived",e.me.types.SMS_MGR_EVENT_SMS_DELIVERY_SUCCESS="smsDeliverySuccess",e.me.types.SMS_MGR_EVENT_SMS_DELIVERY_ERROR="smsDeliveryError",e}return s(t,e),u(t,[{key:"setSms",value:function(e){var t=e;return t.timestamp&&(t.timestamp=t.timestamp.toISOString()),t.deliveryTimestamp&&(t.deliveryTimestamp=t.deliveryTimestamp.toISOString()),this.set(this.getType(this.me.types.SMS_MGR_EVENT_SMS),t)}},{key:"getSms",value:function(){return this.get(this.getType(this.me.types.SMS_MGR_EVENT_SMS))}},{key:"addSentListener",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.subscribe(this.getType(this.me.types.SMS_MGR_EVENT_SMS_SENT),e,t)}},{key:"removeSentListener",value:function(e){return this.unsubscribe(this.getType(this.me.types.SMS_MGR_EVENT_SMS_SENT),e)}},{key:"addReceivedListener",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.subscribe(this.getType(this.me.types.SMS_MGR_EVENT_SMS_RECEIVED),e,t)}},{key:"removeReceivedListener",value:function(e){return this.unsubscribe(this.getType(this.me.types.SMS_MGR_EVENT_SMS_RECEIVED),e)}},{key:"addDeliverySuccessListener",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.subscribe(this.getType(this.me.types.SMS_MGR_EVENT_SMS_DELIVERY_SUCCESS),e,t)}},{key:"removeDeliverySuccessListener",value:function(e){return this.unsubscribe(this.getType(this.me.types.SMS_MGR_EVENT_SMS_DELIVERY_SUCCESS),e)}},{key:"addDeliveryErrorListener",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.subscribe(this.getType(this.me.types.SMS_MGR_EVENT_SMS_DELIVERY_ERROR),e,t)}},{key:"removeDeliveryErrorListener",value:function(e){return this.unsubscribe(this.getType(this.me.types.SMS_MGR_EVENT_SMS_DELIVERY_ERROR),e)}},{key:"SmsMgrSmsStateEnum",get:function(){return{TELEPHONY_SMSMGR_SMS_STATE_RECEIVED:0,TELEPHONY_SMSMGR_SMS_STATE_SENDING:1,TELEPHONY_SMSMGR_SMS_STATE_SENT:2,TELEPHONY_SMSMGR_SMS_STATE_FAILED:3}}},{key:"SmsMgrSmsDeliveryStatusEnum",get:function(){return{TELEPHONY_SMSMGR_SMS_DELIVERY_STATUS_SUCCESS:0,TELEPHONY_SMSMGR_SMS_DELIVERY_STATUS_PENDING:1,TELEPHONY_SMSMGR_SMS_DELIVERY_STATUS_ERROR:2,TELEPHONY_SMSMGR_SMS_DELIVERY_STATUS_NOTAPPLICABLE:3}}}]),t}(l.default);t.default=c},function(e,t){"use strict";var n={};n.ParseError=-32700,n.InvalidRequest=-32600,n.MethodNotFound=-32601,n.InvalidParams=-32602,n.InternalError=-32603,n.AccessError=-32604,n.DuplicateListener=-32605,n.ServiceError=-32e3,n.UnknownError=-32001,n.ServerError=-32099;var r={};r.AccessUndetermined=20,r.AccessDeny=21,r.AccessPromptOneShot=22,r.AccessPromptSession=23,r.AccessPromptBlanket=24,r.JsonParsingError=30,r.JsonMessageValidateError=31,r.JsonVersionError=40,r.JsonMessageIdNotExistError=41,r.JsonMessageObjectNameNotExistError=42,r.JsonFunctionTypeError=43,r.JsonMessageFormateError=44,r.JsonFunctionEventTypeNotExistError=45,r.JsonFunctionMethodNotExistError=46,r.JsonFunctionIdNotExistError=47,r.JsonDuplicateAddlistenerError=55,r.MessageIdDismatch=60,r.MessageObjectDismatch=61,r.MessageUnknownEventType=62,r.MessageUnknownMethodType=63,r.MessageUnregListener=64,r.ServiceNotAvailable=80,r.SendError=90,r.CloseError=91;var o={};o.PromptOneShotDenyAlways=350,o.PromptOneShotDenyThisTime=351,o.PromptOneShotDenyAllowThisTime=352,o.PromptSessionDenyForThisSession=353,o.PromptSessionAllowForThisSession=354,o.PromptBlanketDenyForThisSession=355,o.PromptBlanketAllowForThisSession=356,o.PromptBlanketAllowAlways=357;var i=function(){this.callId,this.remoteParty,this.state,this.duration};window.CallMgrCallData=i;var s=function(){this.callId,this.remoteNumber,this.state,this.duration};window.CallMgrCallStateData=s;var u=function(){this.toNumber,this.deviceHandle};window.CallMgrMakeCallData=u;var a=function(){this.signalStrength};window.CallMgrProviderData=a;var l=function(){this.deviceHandle,this.porvider};window.CallMgrDevicePropertiesData=l;var c=function(){this.duration,this.direction,this.sortOrder,this.remoteParty};window.CallMgrOptionData=c;var f=function(){this.remoteNumber,this.startTime,this.duration,this.direction};window.CallMgrCallHistoryData=f;var _=function(){this.options,this.count};window.CallMgrHistoryGetData=_;var p=function(){this.messagId,this.from,this.timestamp,this.read,this.to,this.body,this.state,this.deliveryStatus,this.deliveryTimestamp};window.SmsMgrSmsData=p;var E=function(){this.messageId,this.recipients,this.deliveryTimestamp};window.SmsMgrSmsDeliveryData=E,function(){var e="telephony",t=1001,r=1002,o=1003,i=1004,s=1005,a={jsonrpc:2,app_id:null,id:null,method:""},l=null,c=null,f={lst:{},push:function(e,t,n,r){var o={};return o.id=window.performance.now().toString(),o.type=e,o.method=t,o.handle1=n,o.handle2=r,this.lst[o.id]=o,o.id},pop:function(e){var t=this.lst[e];return t&&delete this.lst[e],t},clear:function(){this.lst={}}},E={lst:{},push:function(e,t){t&&(this.lst[e]?this.lst[e].push(t):this.lst[e]=[t])},pop:function(e,t){if(t){var n=this.lst[e];if(n)for(var r=0;r<n.length;r++)if(n[r]==t)return n.splice(r,1),void(0==n.length&&(this.lst[e]=void 0))}},get:function(e){return this.lst[e]},clear:function(){this.lst={}}},y=function(e,t){null!=e&&e(t)},h={msg_type:0,method_type:"",event_type:null,json:"",init:function(e){this.json=JSON.parse(e);var n=null,u=null,a=null,l=null;try{n=this.json.result}catch(e){console.log(e)}try{u=this.json.id}catch(e){console.log(e)}try{a=this.json.error}catch(e){console.log(e)}try{l=this.json.app_id}catch(e){console.log(e)}n?u?this.msg_type=r:l?this.msg_type=o:this.msg_type=i:a?this.msg_type=s:l&&(console.log("REQUEST MESSAGE"),this.msg_type=t);var c=this.json.method.split(".");c.length;3==c.length?(this.method_type=c[1],this.event_type=c[2]):2==c.length&&(this.method_type="get",this.event_type=c[1]),this.msg_type==i||"addListener"!=this.method_type&&"removeListener"!=this.method_type||(this.msg_type=o)}},d=function(){var t=new WebSocket("ws://localhost:18892/webapp/"+e);return t.onmessage=function(e){var t=h;if(t.init(e.data),t.msg_type==r){var n=f.pop(t.json.id);n&&n.handle1&&n.handle1(t.json.result)}else if(t.msg_type==s){var u=f.pop(t.json.id);u&&u.handle2&&u.handle2(t.json.error)}else if(t.msg_type==o){if("addListener"==t.method_type){var a=E.get(t.event_type);for(var c in a)t.json.result?a[c](t.json.result.value):t.json.error?a[c](t.json.error):console.log("undefine result")}}else t.msg_type==i?l&&l(t.json.result):console.log("unknown json message")},t.send_data=function(e,t){return 1==c.readyState&&(t?e.params=t:e.params&&delete e.params,c.send(JSON.stringify(e)),!0)},t},S={callMgr_activeCall:"callMgr_activeCall",callMgr_makecall:"callMgr_makecall",callMgr_deviceProperties:"callMgr_deviceProperties",callMgr_callState:"callMgr_callState",callMgr_historyList:"callMgr_historyList",smsMgr_sms:"smsMgr_sms",smsMgr_smsSent:"smsMgr_smsSent",smsMgr_smsReceived:"smsMgr_smsReceived",smsMgr_smsDeliverySuccess:"smsMgr_smsDeliverySuccess",smsMgr_smsDeliveryError:"smsMgr_smsDeliveryError",get:function(t,r,o,i){if(t==this.callMgr_historyList&&r&&r instanceof _==0)return y(i,{code:n.InvalidParams,message:"Invalid params"}),!1;var s=a;return null==o?s.id=window.performance.now().toString():s.id=f.push(t,"get",o,i),s.method=e+".get."+t,c.send_data(s,r)},set:function(t,r,o,i){if(t==this.callMgr_makecall&&r){if(r instanceof u==0)return y(i,{code:n.InvalidParams,message:"Invalid params"}),!1}else if(t==this.smsMgr_sms&&r&&r instanceof p==0)return y(i,{code:n.InvalidParams,message:"Invalid params"}),!1;var s=a;return null==o?s.id=window.performance.now().toString():s.id=f.push(t,"set",o,i),s.method=e+".set."+t,c.send_data(s,r)},query:function(t,n,r,o){var i=a;return null==r?i.id=window.performance.now().toString():i.id=f.push(t,"query",r,o),i.method=e+".query."+t,c.send_data(i,n)},addListener:function(t,n,r){if(r){E.push(t,r);var o=E.get(t);if(o&&1==o.length){var i=a;return i.method=e+".addListener."+t,c.send_data(i,n)}return!0}return!1},removeListener:function(t,n){if(n){if(E.pop(t,n),E.get(t))return!0;var r=a;return r.method=e+".removeListener."+t,c.send_data(r,null)}return!1},init:function(e,t,n,r){c=d(),e&&(a.app_id=e),t&&(c.onopen=t),n&&(c.onclose=n),r&&(l=r)},reset:function(e,t,n,r){c.close(),f.clear(),E.clear(),c=d(),e&&(a.app_id=e),t&&(c.onopen=t),n&&(c.onclose=n),r&&(l=r)},version:function(){return"1.0.0"}};window.telephony=S}()}]);